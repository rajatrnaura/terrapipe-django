import geopandas as gpd
from shapely.geometry import Polygon

tiles = gpd.read_file("/home/rajat/Downloads/rnaura_work/terrapipe-django/terrapipe_django/Sentinel-2-Shapefile-Index-master/sentinel_2_index_shapefile.shp")

print(tiles.crs)
print(tiles.columns)

#17TNG
# polygon_coords = [
#     (-80.12628436088563, 41.882614176795556),
#     (-80.12630581855775, 41.881016602753164),
#     (-80.1247501373291, 41.880840867169994),
#     (-80.12476086616516, 41.88252631126122),
#     (-80.12628436088563, 41.882614176795556)
# ]

# polygon_coords = [
#                         [
#                             -73.84860320138438,
#                             40.719307301123195
#                         ],
#                         [
#                             -73.84838105364346,
#                             40.71928904424064
#                         ],
#                         [
#                             -73.84799296421609,
#                             40.71939452838251
#                         ],
#                         [
#                             -73.84792337576692,
#                             40.71946958430436
#                         ],
#                         [
#                             -73.8475700805644,
#                             40.71944929892834
#                         ],
#                         [
#                             -73.84756472760655,
#                             40.71947161284166
#                         ],
#                         [
#                             -73.84752458042442,
#                             40.71978197831413
#                         ],
#                         [
#                             -73.84793675816096,
#                             40.719810377696774
#                         ],
#                         [
#                             -73.84795816999178,
#                             40.71991788953582
#                         ],
#                         [
#                             -73.84821778843595,
#                             40.72001120155744
#                         ],
#                         [
#                             -73.84852290702011,
#                             40.72002540120161
#                         ],
#                         [
#                             -73.84860320138438,
#                             40.719307301123195
#                         ]
#                     ]


polygon_coords = [
                        [
                            -120.3914559479983,
                            36.81646594283041,
                            0.0
                        ],
                        [
                            -120.3840814903471,
                            36.80794654860831,
                            0.0
                        ],
                        [
                            -120.3826229783576,
                            36.80920283727497,
                            0.0
                        ],
                        [
                            -120.3818872122565,
                            36.80974728319083,
                            0.0
                        ],
                        [
                            -120.387114126865,
                            36.81578412948008,
                            0.0
                        ],
                        [
                            -120.3888689471657,
                            36.81567370662722,
                            0.0
                        ],
                        [
                            -120.3899833986091,
                            36.81601219945999,
                            0.0
                        ],
                        [
                            -120.3907282351877,
                            36.81637566164159,
                            0.0
                        ],
                        [
                            -120.3914559479983,
                            36.81646594283041,
                            0.0
                        ]
                    ]

polygon_coords = [
                        [
                            145.27762413024905,
                            -36.33721862379905
                        ],
                        [
                            145.2791261672974,
                            -36.335732091932464
                        ],
                        [
                            145.27989864349368,
                            -36.3353863827814
                        ],
                        [
                            145.2805852890015,
                            -36.335075243233646
                        ],
                        [
                            145.28401851654056,
                            -36.33500610094315
                        ],
                        [
                            145.28599262237552,
                            -36.335801233578565
                        ],
                        [
                            145.28650760650638,
                            -36.336872921245366
                        ],
                        [
                            145.28728008270267,
                            -36.33794459416771
                        ],
                        [
                            145.2873229980469,
                            -36.339258237635256
                        ],
                        [
                            145.28633594512942,
                            -36.3410558191087
                        ],
                        [
                            145.28491973876956,
                            -36.34271508825978
                        ],
                        [
                            145.28268814086917,
                            -36.34268052051304
                        ],
                        [
                            145.28075695037845,
                            -36.34250768154921
                        ],
                        [
                            145.2783536911011,
                            -36.34133236642219
                        ],
                        [
                            145.27736663818362,
                            -36.33946565299958
                        ],
                        [
                            145.27762413024905,
                            -36.33721862379905
                        ]
                    ]
# print(f"required tile number for entred cordinates ====== 17TNG")
# print(f"required tile number for entred cordinates ====== 18TWL")
# print(f"required tile number for entred cordinates ====== 10SGF")
print(f"required tile number for entred cordinates ====== 55HCV")



polygon = Polygon(polygon_coords)

field_gdf = gpd.GeoDataFrame(index=[0], geometry=[polygon], crs="EPSG:4326")

matched_tiles = tiles[tiles.intersects(polygon)]
print(matched_tiles[['Name']])